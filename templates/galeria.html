


{% macro galeria(bucket, double=False, filtres=False, max_prods=utils.len(productes.__getattribute__(bucket))) %}

<div id="hidden-product-list">
	<div id="gallery-info" double="{{ doble_galeria }}" max-prods="{{ max_prods }}" bucket="{{ bucket }}"></div>
    {% for n, producte in utils.enumerate(productes.__getattribute__(bucket)) %}
    <div class="hidden-info-producte" 
	    id="{{ producte._id }}" 
	    nom="{{ producte.nom }}" 
	    preu="{{ producte.calcular_preu_minim() }}&#8364;" 
	    col="{{ producte.collecio }}" 
	    tipus="{{ producte.tipus }}" 
	    unica="{{ producte.unica }}" 
	    img1="{{ producte.imatges[0] }}" 
	    img2="{{ producte.imatges[1] }}"
	    {% if bucket == "bespoke" %}
	    per_a="{{ loc.fam_per_a }} {{ producte.per_a }}"
	    {% endif %}
	    ></div>
    {% endfor %}
</div>
<div class="content-galeria">
        {% if filtres %}
            <div id="inline-filtres">
                <div class="filtre-buttons">
                    <div class="filtre" field="tipus" value="anell" onclick="filterGaleria(this)">Anells</div>
                    <div class="filtre" field="tipus" value="penjoll" onclick="filterGaleria(this)">Penjolls</div>
                    <div class="filtre" field="tipus" value="arracades" onclick="filterGaleria(this)">Arracades</div>
                </div>
            </div>
        {% endif %}
    <div class="galeria-scroll scroll-left" onmouseover="startScrolling(this.nextElementSibling.nextElementSibling, 'left')" onmouseout="stopScrolling(this.nextElementSibling.nextElementSibling)"></div>
    <div class="galeria-scroll scroll-right" onmouseover="startScrolling(this.nextElementSibling, 'right')" onmouseout="stopScrolling(this.nextElementSibling)"></div>
    <div id="galeria" class="galeria">

        {% for n in range(utils.max(max_prods, 4)) %}
            {% if (double and n % 2 == 0) %}
               <div class="producte-doble">
            {% endif %}
           <div class="producte empty" onmouseover="highlightProduct(this)">
               <div class="imatge primera" onmouseover="highlightProduct(this)"></div>
               <div class="imatge segona" onmouseout="reverseProduct(this)"></div>
               <div class="detalls-galeria">
                    <div class="detalls-principals">
			    {% if bucket == "bespoke" %}
			    	<div class="per-a"></div>
			    {% else %}
               			<div class="nom"></div>
                        	<div class="preu-inline"></div>
			    {% endif %}

                    </div>
                </div>
           </div>
           {% if (double and n % 2 == 1) %}
               </div>
           {% endif %}
        {% endfor %}
    </div>
    {% if max_gallery < utils.len(productes_filtrats)  %}
        <button class="view-more" onclick="location.href='/{{ loc.lan }}/productes/'"> Veure mes</button>
    {% endif %}
</div>
{% endmacro %}

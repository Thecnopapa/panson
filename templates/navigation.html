<!DOCTYPE html>



<div id=loader style="
	display:none;
	background-color:white;
	position:fixed;
	top:0;
	left:0;
	height: 100dvh;
	width: 100dvw;
	z-index: 9998;
	align-items: center;
	justify-content: center;
	">
	<img id=loader-icon style="
		display:flex;
		height: 5dvh;
		width: 5dvh;
		color: black;
		z-index:9999;
		-webkit-animation:spin 4s linear infinite;
    	-moz-animation:spin 4s linear infinite;
    	animation:spin 4s linear infinite;
		" src="/static/media/favicon.ico">

</div>


{% if not user.accepted_cookies %}
        <div id=cookies class="request-cookies">
            <span class="info"><span class="loc" loc="nav_cookie_banner">{{ loc.nav_cookie_banner }}</span><a href="/{{ loc.lan }}/tic#tic-cookies" class="loc" loc="cookie_link">{{ loc.nav_cookie_link }}</a></span>
            <span class="inputs">
		    <span>
			    <input type=checkbox checked value="on" id="accept-analytics">
			    <span class="loc" loc="nav_cookie_analytics">{{ loc.nav_cookie_analytics }}</span>
		    </span>
		    <button class="accept-cookies black-button" onclick="acceptCookies()">{{ loc.nav_cookie_button }}</button>
	    </span>
        </div>
    {% endif %}

{% if hide_title %}
{% else %}
    <div id="title" onclick="location.href='/{{ loc.lan }}/'"></div>
{% endif %}
<div class = "navigation">
    <div class = "navigation-left" id="nav-left">
        <button class="dropbtn" id="menu-button" onmouseover="openMenu()" onclick="location.href='/{{ loc.lan }}/productes/'"> {{ loc.nav_botiga }} </button>
        <button class="menu-simple" id="menu-button-simple" onclick="switchMenu()"><img class="icon-menu-simple" src="/static/media/menu-black.svg" alt="cart"><br> </button>
	<div class="menu-closer" id=menu-closer-landscape onmouseover="event.stopPropagation(closeMenu())"></div>
	<div class="menu-closer" id=menu-closer-portrait onclick="event.stopPropagation(closeMenu())"></div>
        <div class="menu" id="menu" >

            <div class="submenu menu-content menutop " id="collecions-menu" onclick="showDropdown(this)" >
                <div class="titol-submenu menu-content no-line">{{ loc.nav_collecions }}
                <span><img class="plus menu-content item-submenu" src="/static/media/plus.svg"><img class="minus menu-content item-submenu" src="/static/media/minus.svg"></span></div>
                {% if productes %}
                    {% for col in productes.col_names %}
                        <div class="item-submenu menu-content"  onclick="location.href='/{{ loc.lan }}/collecio/{{ utils.lower(col) }}'">{{ col }}</div>
                    {% endfor %}
                {% endif %}
            </div>
            <div class="submenu menu-content" id="peces-menu" onclick="showDropdown(this)">
                <div class="titol-submenu menu-content">{{ loc.nav_peces_uniques }}<span><img class="plus menu-content item-submenu" src="/static/media/plus.svg"><img class="minus menu-content item-submenu" src="/static/media/minus.svg"></span></div>
                {% for prod in productes.uniques()[:-1] %}
                        <div class="item-submenu menu-content"  onclick="location.href='/{{ loc.lan }}/productes/{{ prod._id }}'">{{ prod.nom }}</div>
                    {% endfor %}
                <div class="item-submenu menu-content last-submenu"  onclick="location.href='/{{ loc.lan }}/productes/{{ productes.uniques()[-1]._id }}'">{{ productes.uniques()[-1].nom }}</div>
            </div>
            <div class="submenu menu-content" id="peces-menu" onclick="showDropdown(this)">
                <div class="titol-submenu menu-content" onclick="location.href='/{{ loc.lan }}/productes/'">{{ loc.nav_peces }}</div>
                {% if productes %}
                    {% for tipus in productes.tipus %}
                        <div class="titol-submenu menu-content no-line"  onclick="location.href='/{{ loc.lan }}/productes/?filterKey=tipus&filterValue={{ tipus }}'">{{ loc["tip-"+tipus+"-plural"]}}</div>
                    {% endfor %}
                {% endif %}
            </div>
	    <div class="titol-submenu menu-content button-menu" id="fetamida-menu" onclick="location.href='/{{ loc.lan }}/fetamida/intro'">{{ loc.nav_fetamida_mobil }}</div>
            <div class="titol-submenu menu-content button-menu" id="projecte-menu" onclick="location.href='/{{ loc.lan }}/projecte/'">{{ loc.nav_projecte_mobil }}</div>
            <div class="titol-submenu menu-content button-menu" id="contacte-menu" onclick="location.href='/{{ loc.lan }}/contacte/'">{{ loc.nav_contacte_mobil }}</div>
	    {% if user.is_admin %}
	    <div class="titol-submenu menu-content button-menu" id="admin-menu" onclick="location.href='/admin/'">{{ loc.nav_admin }}</div>
	    <div class="titol-submenu menu-content button-menu" id="logout-menu" onclick="location.href='/admin/logout'">{{ loc.nav_tancar_sessio }}</div>
            <input type="number" class="text-size-input titol-submenu menu-content button-menu" value="16" oninput="document.documentElement.style.fontSize = this.value+'px';">
	    {% endif %}
        </div>
	<button class="dropbtn" id="projecte" onclick="location.href='/{{ loc.lan }}/projecte/'"> {{ loc.nav_projecte}}</button>
        <button class="dropbtn last" id="fetamida" onclick="location.href='/{{ loc.lan }}/fetamida/intro'"> {{ loc.nav_fetamida }}</button>
        <button class="dropbtn" id="contacte" onclick="location.href='/{{ loc.lan }}/contacte/'">{{ loc.nav_contacte }}</button>
    </div>

    <div class = "navigation-right">
    {% if user.is_admin %}
    <div class="language" onclick="location.href='/admin/'" oncontextmenu="window.open('/admin/', '_blank')">{{ loc.nav_admin }}</div>
    {% endif %}
    {% if user.is_admin %}
    <div class="language" onclick="location.href='/admin/logout'">{{ loc.nav_tancar_sessio }}</div>
    {% endif %}
        {% for lang in loc.all_langs %}
            {% if lang == loc.lan %}
                <div class="language" id="current" onclick="location.href='/{{ lang }}/'">
                    {{ utils.upper(lang) }}
                </div>
            {% else %}
                <div class="language" onclick="location.href='/{{ lang }}/'">
                    {{ utils.upper(lang) }}
                </div>
            {% endif %}
        {% endfor %}
    <div class = "cart" id="cart-button" onclick="openCart()">
        <img class="shopping-cart" src="/static/media/bag-black.svg" alt="cart">
        <div class="cercle-carret cart-counter">{{ user._n_cart if user._n_cart > 0 }}</div>

        </div>
    </div>
</div>

<div class="content-carret is-carret" id="carret"  >
    <div class="title-carret is-carret">{{ loc.car_carret }}</div>
    <div class="is-carret" id="close-carret" onclick="closeCart()">{{ loc.car_tancar }}</div>
    <div class="is-carret cart-info"><div class=cart-counter></div>&nbsp;
        <div class="cart-counter-text is-carret plural loc" loc="car_info_quantitat">{{loc.car_info_quantitat }}</div>
        <div class="cart-counter-text is-carret singular loc" loc="car_info_quantitat_singular">{{loc.car_info_quantitat_singular }}</div></div>
    <div class="is-carret no-cart-info">{{loc.car_info_buit |safe}}<a class="is-carret" href="/{{lan}}/productes">{{loc.car_info_buit_boto}}</a></div>
    <div class="llista-carret is-carret" onscroll="event.stopPropagation()" onwheel="event.stopPropagation()" >
        {% for n, item in utils.enumerate(cart.values()) if item.producte != None%}
		{{ cart_macros.cart_item(item, n) }}
        {% endfor %}
    </div>

    <div class="footer-carret is-carret">
        
	<div class="total-cart is-carret"><div class="total-cart-title is-carret">{{ loc.car_total }}</div><div class="total-cart-value is-carret">{{ user.total_carret }}&#8364</div></div>
        <button class="checkout-button is-carret black-button"  onclick="location.href='/{{ loc.lan }}/checkout/stripe'">{{ loc.car_checkout }}</button>
        <div class="detalls_pagament is-carret loc" loc="car_detalls_pagament">{{ loc.car_detalls_pagament }}</div>

    </div>
</div>



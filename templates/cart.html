


{% macro cart_item(item, n, template=False) %}

            <div class="producte-carret is-carret">
            {% if utils.len(item["data"]["images"]) > 0 %}
            <div class="producte-foto is-carret slow-image" background='{{ item["data"]["images"][0] }}'></div>
            {% endif %}
                <div class="detalls-carret is-carret">

                    <div class="producte-carret-nom is-carret">{{ item["data"]["name"] }}</div>
                    <div class="producte-carret-id is-carret hide">ID: {{ item.id2 }}</div>
                    {% if item["options"]["talla"] %}
                    {% if item["options"]["talla"] != "NA" %}
                    <div class="producte-carret-talla is-carret {{ "hide" if item["options"]["talla"] == "null" }}">{{ "CUSTOM: " if "(" in utils.str(item["options"]["talla"])}}{{ item["options"]["talla"] }}</div>
                    {% endif %}
                    {%endif%}
                    {% if item["options"]["material"] %}
                        <div class="producte-carret-material is-carret hide loc" loc="car_talla">{{ loc.car_talla }}: {{ item["options"]["material"]}}</div>
                    {% endif %}
                    {% if item["options"]["variacio"] %}
                        <div class="producte-carret-variacio is-carret {{ "hide" if item["options"]["variacio"]== "null" }}"><span class="is-carret loc" loc="car_variacio">{{ loc.car_variacio }}</span>{{ item["options"]["variacio"] }}</div>
                    {% endif %}
                    {% if item["options"]["color"] %}
                        <div class="producte-carret-color is-carret {{ "hide" if item["options"]["color"] == "null" }}">

                            {% for n, col in utils.enumerate(item["options"]["color"]) %}
                                <span class="producte-carret-cercle is-carret {{ item["opcions"].get("extra_colors", [])[n] }}" style="background-color:{{ loc["colours-"+col] }}"></span>
                            {% endfor %}
                        </div>
                    {% endif %}
                    <div class="producte-carret-preu is-carret">{{ item["price"] * item["quantity"] }}&#8364;</div>
                    <div class="quantitats-carret is-carret">
                        <img class="carret-minus add-item is-carret" src="/static/media/minus.svg" onclick="modifyItem(this.nextElementSibling, {{ n }}, 'decrease')" alt="decrease">
                        <div class="producte-carret-quantitat is-carret" price="{{ item["price"] }}">{{ item["quantity"]}}</div>
                                    <img class="carret-plus delete-item is-carret" src="/static/media/plus.svg" onclick="modifyItem(this.previousElementSibling,{{ n }}, 'increase')" alt="increase">
                    </div>
                                    <div class="producte-carret-delete is-carret loc" onclick="deleteItem(this.parentElement.parentElement, {{ n }})" loc="car_eliminar">{{ loc.car_eliminar }}</div>

                </div>


            </div>
{%endmacro%}



{% for n, item in utils.enumerate(cart.values()) %}
    {{ cart_item(item, n) }}
{% endfor %}



